 <%= render 'layouts/head' %>

<header id="main_header" ng-controller="HeaderBarController">
  <div class="container">
    <div class="row">
      <nav id="main_nav_left" class="navbar navbar-expand-md col-4 px-md-0 px-lg-1 pb-0 pt-3">
        <ul class="nav">
          <% if user_signed_in? %>
            <li class="nav-item">
              <a class="nav-link nav-icon-text text-black pl-0" href="/front-page" id="nav_link_front_page">
                <span class="pr-1 pt-1">
                  <i class="far fa-newspaper"></i>
                </span> Front Page
              </a>
            </li>
          <% else %>
            <li class="nav-item">
              <a class="nav-link text-black pl-md-4" href="/our-mission" id="nav_link_mission">
                Our Mission
              </a>
            </li>
          <% end %>
          <li class="nav-item">
            <a class="nav-link text-black pl-md-4" style="<%= 'top: -1px; position: relative;' unless user_signed_in? %>" href="/exchanges" id="nav_link_exchanges">Exchanges</a>
          </li>
        </ul>
      </nav>

      <div id="logo" class="col-4 d-flex justify-content-center px-md-0 px-lg-1">
        <a href="/?<%= 'force_home=1' if user_signed_in? %>">
          <span class="text-hide">TheArticle</span>
        </a>
      </div>

      <nav class="navbar navbar-expand-md col-4 d-flex px-md-0 px-lg-1 pb-0">
        <ul class="nav w-100 justify-content-end ">
          <% if user_signed_in? %>
            <li class="nav-item mr-2" id="nav_link_search_signed_in">
              <a class="nav-link nav-icon py-2 text-black search_trigger" href="#">
                <i class="fas fa-search"></i>
              </a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link nav-icon py-2 text-black pl-md-5" href="#" id="nav_link_notifications" data-toggle="dropdown">
                <i class="fas fa-bell"></i>
              </a>
               <div class="dropdown-menu dropdown-menu-right bg-light" id="notifications_menu">
                <h6 class="dropdown-header">Notifications</h6>
                <% for i in 1..12 %>
                  <div class="dropdown-item notification-item border-bottom d-flex bg-white">
                    <img src="<%= current_user.profile_photo.url(:square) %>" class="rounded-circle" style="width:45px; height: 45px;">
                    <p class="ml-4 notification-item-detail"><b>Lorem ipsum</b> dolor sit amet, consectetur <b>adipisicing elit</b>, sed do eiusmod tempor.<br />
                    <span class="notification-item-time">1 hour ago</span></p>
                  </div>
                 <% end %>
                 <p class="dropdown-see-all text-center pt-2 my-0">
                  <a href="/notifications"><small>See all notifications</small></a>
                 </p>
              </div>
            </li>
            <li class="nav-item dropdown" >
              <a class="nav-link nav-icon py-0 text-black pl-md-5" href="#" id="nav_link_my_profile" data-toggle="dropdown">
                <i class="fas fa-user-circle"></i>
              </a>
             <div class="dropdown-menu dropdown-menu-right bg-light" id="my_profile_menu">
                <h6 class="dropdown-header mb-2 d-flex">
                  <a href="<%= my_profile_path %>" class="mr-3">
                    <img src="<%= current_user.profile_photo.url(:square) %>" class="rounded-circle" alt="<%= current_user.display_name %>" style="">
                  </a>
                  <a href="<%= my_profile_path %>" class="pt-1">
                    <span class="display_name"><%= current_user.display_name %></span>
                    <span class="username"><%= current_user.username %></span>
                    <span class="link">View profile</span></a>
                  </h6>
                </h6>
                <a class="dropdown-item py-2 bg-white notification-item" href="<%= front_page_path %>">
                  <i class="far fa-newspaper mr-2"></i>
                  Front page
                </a>
                <a class="dropdown-item py-2 bg-white notification-item" href="<%= my_profile_path %>?panel=following">
                  <i class="fas fa-angle-double-right mr-2"></i>
                  Following (4)
                </a>
                <a class="dropdown-item py-2 bg-white notification-item" href="<%= my_profile_path %>?panel=followers">
                  <i class="fas fa-angle-double-left mr-2"></i>
                  Followers (12)
                </a>
                <a class="dropdown-item py-2 bg-white notification-item" href="/account-settings">
                  <i class="fas fa-cogs mr-2"></i>
                  Account settings
                </a>
                <a class="dropdown-item py-2 bg-white notification-item" href="<%= destroy_user_session_path %>" data-method="delete">
                  <i class="fas fa-sign-out-alt mr-2"></i>
                  Sign out
                </a>
              </div>
            </li>
          <% else %>
            <li class="nav-item mr-3">
              <a class="nav-link nav-icon py-0 text-black search_trigger" href="#" style="font-size: 1.3em;" id="nav_link_search">
                <i class="fas fa-search"></i>
              </a>
            </li>
            <li class="nav-item mr-1">
              <a class="nav-link nav-icon-text text-black pl-md-4 pb-0 pr-0" href="#" ng-click="openRegisterForm($event)" id="nav_link_join">Register</a>
            </li>
            <li class="nav-item">
              <a class="nav-link nav-icon-text text-black pl-md-4 pb-0" href="#" id="nav_link_sign_in" ng-click="openSigninForm($event)">
                <i class="fas fa-sign-in-alt"></i>
                Sign in
              </a>
            </li>
          <% end %>
        </ul>
      </nav>
    </div>
  </div>
</header>

<%= render 'common/search-box' %>

<%= render 'common/join-form-modal' %>

<main id="main_content" class="mb-4" role="main">
  <%= yield %>
</main>

<%# unless user_signed_in? %>
<footer id="main_footer_top" class="main_footer bg-black text-white border-light border-bottom" ng-controller="FooterController">
  <div class="container">
    <div class="row py-2">
      <nav class="navbar navbar-expand-md col-12 col-lg-10 d-flex" id="footer_nav">
        <ul class="nav">
          <li class="nav-item">
            <a class="mr-3 text-white nav-link px-2" href="/our-mission">Our Mission</a>
          </li>
          <li class="nav-item">
            <a class="mr-3 text-white nav-link px-2" href="/terms-and-conditions">Terms & Conditions</a>
          </li>
          <li class="nav-item">
            <a class="mr-3 text-white nav-link px-2" href="/privacy-policy">Privacy Policy</a>
          </li>
          <li class="nav-item">
            <a class="mr-3 text-white nav-link px-2" href="/contributors">Contributors</a>
          </li>
          <li class="nav-item">
            <a class="mr-3 text-white nav-link px-2" href="/sponsors">Sponsors</a>
          </li>
          <li class="nav-item">
            <a class="mr-3 text-white nav-link px-2" href="/write-for-us">Write for Us</a>
          </li class="nav-item">
          <li class="nav-item">
            <a class="mr-3 text-white nav-link px-2" href="/contact">Contact</a>
          </li>
        </ul>
      </nav>

      <% unless user_signed_in? %>
      <div class="col-md-0 col-lg-2 d-flex align-items-center justify-content-end"">
        <a class="join_button btn btn-sm bg-grass text-white" href="#" ng-click="openRegisterForm($event)">Register now</a>
      </div>
      <% end %>
    </div>
  </div>
</footer>
<%# end %>

<footer id="main_footer_bottom" class="main_footer bg-black text-white border-light border-top">
  <div class="container">
    <div class="row py-3">
      <div id="copyright" class="col-6 col-lg-5 d-flex align-items-center">
        <p class="text-light pl-5 pt-2">
          <small>
            &copy; <%= Date.today.strftime("%Y") %> TheArticle.&nbsp;
            <% if is_staging? %>
              Staging server
            <% else %>
              All rights reserved
            <% end %>
          </small>
        </p>
      </div>
      <div class="col-md-0 col-lg-2"></div>
      <div class="col-6 col-lg-5 d-flex justify-content-end">
        <nav class="navbar navbar-expand-md ml-auto pr-0" id="social_links">
          <ul class="nav ">
            <li class="nav-item" id="social_facebook">
              <a class="ml-2 nav-link text-white" href="https://www.facebook.com/TheArticle.exchange/" target="_blank">
                <i class="fab fa-facebook-f"></i>
              </a>
            </li>
            <li class="nav-item" id="social_twitter">
              <a class="ml-2 nav-link text-white" href="https://twitter.com/TweetTheArticle" target="_blank">
                <i class="fab fa-twitter"></i>
              </a>
            </li>
            <li class="nav-item" id="social_linked_in">
              <a class="ml-2 nav-link text-white" href="https://www.linkedin.com/company/thearticle/" target="_blank">
                <i class="fab fa-linkedin-in"></i>
              </a>
            </li>
            <li class="nav-item" id="social_rss">
              <a class="ml-2 nav-link text-white mr-0 pr-0" href="/feed/rss" target="_blank">
                <i class="fas fa-rss"></i>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</footer>
<%= render 'layouts/foot' %>