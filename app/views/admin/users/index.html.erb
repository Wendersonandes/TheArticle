<div ng-controller="UsersController"
      data-records-per-page="<%= controller.records_per_page %>"
      data-start-date="<%= @search_start_date %>"
      data-end-date="<%= @search_end_date %>">
  <% content_for(:title) do %>
    <%= display_resource_name(page.resource_name) %>
  <% end %>

  <header class="p-3" role="banner">
    <div class="d-flex w-100 mt-2 mb-4">
      <%= image_tag 'menu_open.png', id: 'navigation__toggle' %>

      <h1 class="main-content__page-title" id="page-title">Users</h1>
    </div>

    <form name="users_search_form" id="users_search_form" class="d-block bg-grey py-2">
      <div class="d-flex justify-content-between align-items-start">
        <div class="form-field w-50 px-3">
          <label>Search for: </label>
          <input type="text"
                  placeholder="Begin typing a username, display name, email address, etc..."
                  ng-model="searchFields.query"
                  ng-keyup="runSearch($event)" />
        </div>

        <div class="form-field px-3">
          <label>Dates: </label>
          <div class="d-flex justify-content-between">
            <input type="date"
                   id="start"
                   min="<%= @search_start_date %>"
                   max="<%= @search_end_date %>"
                   class="mr-2"
                   ng-model="searchFields.dateFrom"
                   ng-change="runSearch($event)" />
            <input type="date"
                   id="end"
                   min="<%= @search_start_date %>"
                   max="<%= @search_end_date %>"
                   class=""
                   ng-model="searchFields.dateTo"
                   ng-change="runSearch($event)" />
          </div>
        </div>

        <div class="form-field px-3">
          <label>Refine search by: </label>
          <select name="refine"
                    class="text-increase-2 mt-2"
                    ng-model="searchFields.refiner"
                    ng-change="runSearch($event)">
            <option value="">Choose...</option>
            <option value="active">Active account</option>
            <option value="deactivated">Deactivated account</option>
            <option value="verified">Verified</option>
            <option value="watchlisted">On watchlist</option>
            <option value="blacklisted">On blacklist</option>
         </select>
        </div>

        <div class="form-field px-3">
          <label>&nbsp;</label>
          <input type="reset" value="Reset form" />
        </div>

      </div>

    </form>
  </header>

  <section class="main-content__body main-content__body--flush">
    <%= render(
      "collection",
      collection_presenter: page,
      collection_field_name: resource_name,
      page: page,
      resources: @users,
      table_title: "page-title"
    ) %>

    <%= paginate @users %>

    <div id="per_page_setter">
      <label>Show <%= controller.records_per_page %> results per page</label>
      <select name="results_per_page" id="results_per_page" ng-model="records.perPage">
        <option ng-value="10">10</option>
        <option ng-value="50">50</option>
        <option ng-value="100">100</option>
        <option ng-value="250">250</option>
      </select>
    </div>

  </section>
</div>